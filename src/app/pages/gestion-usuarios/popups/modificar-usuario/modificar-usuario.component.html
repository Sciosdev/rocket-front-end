<nb-card status="primary" class="overflow-auto" style="height: 100%; position: sticky;">
    <nb-card-header>Modificaci칩n de usuario: [ {{usuario.user}} ] </nb-card-header>
    <nb-card-body>
        <div class="row mb-2">
            <div class="col-sm-6">
                <div class="d-flex justify-content-left">
                    <div class="p-2">
                        <img class="border border-secondary" [src]="imagePath" width="150px" height="150px"
                            *ngIf="usuario.foto && usuario.foto != 'nofoto'" />
                        <div class="border border-secondary" style="width: 150px; height: 150px"
                            *ngIf="!usuario.foto || usuario.foto == 'nofoto'">
                            <div class="d-flex align-items-center justify-content-center h-100">
                                <div>
                                    <div class="d-flex justify-content-center">
                                        <nb-icon icon="person-delete-outline" status="info" style="font-size: 3rem;">
                                        </nb-icon>
                                    </div>
                                    <div class="d-flex justify-content-center">
                                        <span>Sin Foto</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="p-2">
                        <p-fileUpload #form name="myfile[]" accept="image/*" mode="basic" [auto]="true"
                            chooseLabel="Seleccionar imagen" chooseIcon="pi-search" uploadLabel="Cargar"
                            cancelLabel="Cancelar" [customUpload]="true" (uploadHandler)="myUploader($event, form)"
                            (onBeforeUpload)="onBeforeUpload()" (onUpload)="onUpload()"></p-fileUpload>
                        <hr />
                        <button mat-raised-button color="accent" matRipple (click)="deleteFoto()" size="large">
                            <nb-icon icon="trash-2-outline"></nb-icon>
                            Quitar Im치gen
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="row ">
                    <div class="col-sm-6 mb-3">
                        <div class="form-group">
                            <label for="rol" class="label">Rol</label>
                            <input type="text" nbInput fullWidth id="inputRol" placeholder="Rol" 
                                [value]="usuario.rol | undefined" readonly />
                        </div>
                    </div>

                    <div class="col-sm-6  mb-3">
                        <div class="form-group">
                            <label class="label">Tienda</label>
                            <input type="text" nbInput fullWidth id="inputTienda" placeholder="Tienda" 
                                [value]="nombreTienda | undefined" readonly />

                        </div>
                    </div>

                    <div class="col-sm-12">
                        <div class="form-group">
                            <label for="inputusername" class="label">Usuario</label>
                            <input type="text" nbInput fullWidth id="inputusername" placeholder="Usuario"
                                [value]="usuario.user | undefined" readonly />


                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr />
        <span class="text-info font-weight-bold">Los campos marcados con * son requeridos</span>

        <div class="p-2">
            <form>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label for="inputFirstName" class="label">Nombre *</label>
                            <input type="text" nbInput fullWidth id="inputFirstName" placeholder="Nombre"
                                [value]="usuario.firstName | undefined" [(ngModel)]="usuario.firstName" name="firstName"
                                #nombre="ngModel" required />

                            <ng-container *ngIf="nombre.invalid && nombre.touched">
                                <p class="caption status-danger" *ngIf="nombre.errors?.required">
                                    Nombre es requerido!
                                </p>
                            </ng-container>
                        </div>

                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label for="inputLastName" class="label">Apellido Paterno</label>
                            <input type="text" nbInput fullWidth id="inputLastName" placeholder="Apellido Paterno"
                                [value]="usuario.lastName | undefined" [(ngModel)]="usuario.lastName" name="lastName" />
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label for="inputSecondLastName" class="label">Apellido Materno</label>
                            <input type="text" nbInput fullWidth id="inputSecondLastName" placeholder="Apellido Materno"
                                [value]="usuario.secondLastName | undefined" [(ngModel)]="usuario.secondLastName"
                                name="secondLastName" />
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label for="inputDireccion" class="label">Direcci칩n</label>
                            <input type="email" nbInput fullWidth id="inputDireccion" placeholder="Direcci칩n"
                                [value]="usuario.address | undefined" [(ngModel)]="usuario.address" name="address" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="inputCorreo" class="label">Correo</label>
                            <input type="email" nbInput fullWidth id="inputCorreo" placeholder="Correo"
                                [value]="usuario.email | undefined" [(ngModel)]="usuario.email" name="email" />
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="inputTelefono" class="label">Telefono</label>
                            <input type="email" nbInput fullWidth id="inputTelefono" placeholder="Telefono"
                                [value]="usuario.phoneNumber | undefined" [(ngModel)]="usuario.phoneNumber"
                                name="phoneNumber" />
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="d-flex justify-content-end">
            <div class="p-2">
                <button mat-raised-button color="accent" matRipple (click)="accept()"
                    [disabled]="nombre.errors?.required ">
                    <nb-icon icon="checkmark-square-2-outline"></nb-icon>
                    Aceptar
                </button>
            </div>
            <div class="p-2">
                <button mat-raised-button color="primary" matRipple (click)="cancel()">
                    <nb-icon icon="close-square-outline"></nb-icon>
                    Cancelar
                </button>
            </div>
        </div>
    </nb-card-body>
</nb-card>